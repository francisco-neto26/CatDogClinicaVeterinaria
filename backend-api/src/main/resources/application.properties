# ==========================================
# APLICAÇÃO
# ==========================================
# Define o nome do serviço
spring.application.name=backend-api

# ==========================================
# SERVIDOR WEB
# ==========================================
# Porta onde o servidor Tomcat embutido irá rodar (dentro do container)
server.port=8080

# ==========================================
# BANCO DE DADOS (POSTGRES)
# ==========================================
# URL de conexão. Note que o host é 'database', o nome do serviço no docker-compose.yml
spring.datasource.url=jdbc:postgresql://database:5432/${DB_NAME}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# Configurações do Hibernate (JPA)
# NUNCA use 'create' ou 'update' em produção com Flyway. 'none' entrega o controle ao Flyway.
spring.jpa.hibernate.ddl-auto=none
# Dialeto específico do Postgres
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
# Mostra os SQLs gerados no console (ótimo para debug)
spring.jpa.show-sql=true
# Formata o SQL no console
spring.jpa.properties.hibernate.format_sql=true

# ==========================================
# FLYWAY (MIGRATIONS)
# ==========================================
# O Spring Boot autoconfigura o Flyway para usar o 'spring.datasource' acima.
# Habilita o Flyway (já é padrão, mas é bom ser explícito)
spring.flyway.enabled=true
# Cria um baseline (registro inicial) se as tabelas já existirem. Útil.
spring.flyway.baseline-on-migrate=true
# Localização dos seus scripts SQL de migration
spring.flyway.locations=classpath:db/migration

# ==========================================
# CACHE (REDIS)
# ==========================================
# Host é 'redis', o nome do serviço no docker-compose.yml
spring.data.redis.host=redis
spring.data.redis.port=6379
# (Não definimos senha no docker-compose, então não é necessário aqui)

# ==========================================
# MENSAGERIA (RABBITMQ) - PRODUTOR
# ==========================================
# Host é 'rabbitmq', o nome do serviço no docker-compose.yml
spring.rabbitmq.host=rabbitmq
spring.rabbitmq.port=5672
# Usuário e senha definidos no docker-compose
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# Nomes customizados para nossas filas/exchanges (você usará isso no seu código)
app.rabbitmq.exchange.name=vet.exchange
app.rabbitmq.queue.registration=vet.registration.queue
app.rabbitmq.routingkey.registration=vet.registration.key

# ==========================================
# STORAGE (MINIO)
# ==========================================
# Essas propriedades são customizadas. Você irá lê-las no seu 'MinioService' com @Value
minio.url=http://minio:9000
minio.public-url=http://localhost:9000
minio.access-key=${MINIO_USER}
minio.secret-key=${MINIO_PASSWORD}
# Nome do bucket que você quer usar para as fotos dos pets
minio.bucket.name=pet-photos

# ==========================================
# UPLOAD DE ARQUIVOS
# ==========================================
# Limite máximo por arquivo (Ex: 20MB)
spring.servlet.multipart.max-file-size=20MB

# Limite máximo da requisição total (Ex: 20MB)
spring.servlet.multipart.max-request-size=20MB

# ==========================================
# SEGURANÇA (JWT)
# ==========================================
# Propriedades customizadas para seu 'JwtTokenProvider'
# IMPORTANTE: Mude esta chave para uma string longa e segura (use um gerador Base64)
app.jwt.secret=MINHA-CHAVE-SECRETA-MUITO-LONGA-E-SEGURA-PARA-PROJETO-VET-123456
# Tempo de expiração do token (Ex: 1 hora = 3600000 ms)
app.jwt.expiration-ms=3600000

# ==========================================
# DOCUMENTAÇÃO (SPRINGDOC / SWAGGER)
# ==========================================
# Caminho para acessar a UI do Swagger
springdoc.swagger-ui.path=/swagger-ui.html
# Caminho para o JSON da especificação OpenAPI
springdoc.api-docs.path=/v3/api-docs

# ==========================================
# MONITORAMENTO (ACTUATOR)
# ==========================================
# Expõe os endpoints de 'health' (saúde) e 'info' via web
management.endpoints.web.exposure.include=health,info
